max_difference <- data.frame(fromJSON(getURL(URLencode(gsub("\n", " ", '129.152.144.84:5001/rest/native/?query="select WORLDBANKINCOMEGROUP AS INCOMEGROUP, COUNTRY, LIFEYEARS, last_value(max_life) OVER (PARTITION BY WORLDBANKINCOMEGROUP ORDER BY COUNTRY) max_life, last_value(max_life) OVER (PARTITION BY WORLDBANKINCOMEGROUP ORDER BY COUNTRY) - LIFEYEARS difference_life from (select WORLDBANKINCOMEGROUP, COUNTRY, LIFEYEARS, max(LIFEYEARS) OVER (PARTITION BY WORLDBANKINCOMEGROUP) max_life FROM LIFEYEARS WHERE YEAR="2012" AND INDICATOR LIKE \\\'Life expectancy at birth (years)\\\' AND SEX LIKE \\\'Both sexes\\\' ORDER BY 1,2)  order by 1,2"')),httpheader=c(DB='jdbc:oracle:thin:@129.152.144.84:1521/ORCL.usuniversi01134.oraclecloud.internal', USER='C##cs329e_jp33534', PASS='orcl_jp33534', MODE='native_mode', MODEL='model', returnDimensions ='False', returnFor = 'JSON'), verbose = TRUE)));
